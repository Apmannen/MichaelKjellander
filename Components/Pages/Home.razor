@page "/"
@using MichaelKjellander.Models.Wordpress
@using Microsoft.EntityFrameworkCore

<PageTitle>Michael Kjellander</PageTitle>

<h1>Välkommen till michaelkjellander.se!</h1>

Här postar jag tv-spelrecensioner och annat!

@if (posts != null)
{
    @foreach (var post in posts)
    {
        <p>Post: @post.Title</p>
    }
}


@code {
    private List<WpPost>? posts;
    
    protected override async Task OnInitializedAsync()
    {
        await using var context = new Data.WordpressContext();

        posts = await context.WpPosts.Where(row => row.Status == "publish").ToListAsync();
    }
}
